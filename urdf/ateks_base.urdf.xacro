<?xml version="1.0"?>

<robot xmlns:xacro="http://ros.org/wiki/xacro">
 
  <xacro:macro name="ateks_base_macro">
 
  	<!--______________________dummy link _______________________________--> 
    <link name="base_dummy">
      <pose>0 0 0 0 0 0</pose>
    </link>  
     
    <!--______________________ateks base link _______________________________-->     
    <link name="base_link">
      <pose>0 0 0 0 0 0</pose>
      <inertial>
        <mass value="83.7" />
        <origin xyz="0 0 0" />
        <inertia ixx="10.0" ixy="10.0" ixz="10.0" iyy="10.0" iyz="10.0" izz="100.0" />
      </inertial>

      <visual>
        <origin xyz="0.61 0.33 0.1" rpy="0 0.4 3.14" />
        <geometry>
          <mesh filename="package://ateks/meshes/ateks.stl" scale="0.001 0.001 0.001"/>
        </geometry>
      </visual>

      <collision>
        <origin xyz="0 0 0.2" rpy="0 0 0" />
        <geometry>
	  <box size="1.08 0.6 0.1"/>
        </geometry>
      </collision>
    </link>
    
    <!--____________________ joint between dummy and base _______________________________-->
	<joint name="base_dummy_joint" type="fixed">
      <origin xyz="0 0 0 " rpy="0 0 0"/>
      <parent link="base_dummy"/>
      <child link="base_link"/>
      <axis xyz="0 0 0"/>
    </joint>   
     
    <!--____________________ dummy kinect link _______________________________-->
    <link name="kinect_dummy">
      <pose>0 0 0 0 0 0</pose>
	</link>
	
	
	<!--____________________ dummy kinect link _______________________________-->
    <link name="kinect_link">
      <pose>0 0 0 0 0 0</pose>
      <inertial>
        <mass value="1.0" />
        <origin xyz="0 0 0" />
        <inertia ixx="1.0" ixy="0" ixz="0" iyy="1.0" iyz="0" izz="1.0" />
      </inertial>

      <visual>
        <origin xyz="0 0 0" rpy="0 0 0" />
        <geometry>
        <mesh filename="package://ateks/meshes/kinect.dae" scale="1 1 1"/>
      	  <!-- <sphere radius=".1"/> -->
        </geometry>
		</visual>
	</link>

	<!--____________________ dummy kinect and kinect joint _______________________________-->	
    <joint name="kinect_joint_dummy" type="continuous">
      <origin xyz="0 0 0" rpy="-1.57 0 -1.57"/>
      <parent link="kinect_link"/>
      <child link="kinect_dummy"/>
      <axis xyz="0 1 0"/>
    </joint>	
    
    <!--____________________ second kinect joint and links _______________________________-->	
    
    <link name="kinect_dummy2">
      <pose>0 0 0 0 0 0</pose>
	</link>
	
    <joint name="kinect_joint_dummy2" type="continuous">
      <origin xyz="0 0 0" rpy="-1.57 0 -1.57"/>
      <parent link="kinect_link2"/>
      <child link="kinect_dummy2"/>
      <axis xyz="0 1 0"/>
    </joint>	
		
	<link name="kinect_link2">
      <pose>0 0 0 0 0 0</pose>
      <inertial>
        <mass value="1.0" />
        <origin xyz="0 0 0" />
        <inertia ixx="1.0" ixy="0" ixz="0" iyy="1.0" iyz="0" izz="1.0" />
      </inertial>

      <visual>
        <origin xyz="0 0 0" rpy="0 0 0" />
        <geometry>
        <mesh filename="package://ateks/meshes/kinect.dae" scale="1 1 1"/>
      	  <!-- <sphere radius=".1"/> -->
        </geometry>
	</visual>

      <collision>
        <origin xyz="0 0 0" rpy="0 0 0" />
        <geometry>
      	  <sphere radius=".1"/>
        </geometry>
      </collision>
    </link>

    <!--____________________ kinect joints _______________________________-->	
    <joint name="kinect_joint" type="continuous">
      <origin xyz="-0.45 -0.2 1.54" rpy="0 0 0"/>
      <parent link="base_link"/>
      <child link="kinect_link"/>
      <axis xyz="0 1 0"/>
    </joint>

    <joint name="kinect_joint2" type="continuous">
      <origin xyz="-0.45 -0.2 1.64" rpy="0 0 0"/>
      <parent link="base_link"/>
      <child link="kinect_link2"/>
      <axis xyz="0 1 0"/>
    </joint>

  </xacro:macro>

  <!--____________________ caster links and joints as a macro added at ateks.urdf.xacro -->	
  <xacro:macro name="ateks_caster" params="prefix reflect">
    <link name="${prefix}_caster">
      <collision>
        <origin xyz="0.33884 ${reflect*0.28539} 0.075" rpy="0 0 0" />
        <geometry>
      	  <sphere radius="0.075"/>
        </geometry>
      </collision>
    </link>

    <joint name="${prefix}_caster_joint" type="fixed">
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <parent link="base_link"/>
      <child link="${prefix}_caster"/>
      <axis xyz="0 1 0"/>
    </joint>

    <gazebo reference="${prefix}_caster">
      <mu1>0.2</mu1>
      <mu2>0.2</mu2>
    </gazebo>
    
  </xacro:macro>
  
  <!--____________________ wheels of the robot as a macro added at ateks.urdf.xacro -->	
  <xacro:macro name="wheel" params="prefix reflect">
    <link name="${prefix}_wheel">
      <pose>0 0 0 0 0 0</pose>
      <inertial>
        <mass value="1.0" />
        <origin xyz="0 0 0" />
        <inertia ixx="1.0" ixy="0" ixz="0" iyy="1.0" iyz="0" izz="1.0" />
      </inertial>
      
      <collision>
	<origin xyz="0 0 0" rpy="0 1.5707 1.5707" />
	<geometry>
	  <cylinder radius="0.1925" length="0.05" />
	</geometry>
      </collision>
    </link>
    
    <joint name="${prefix}_wheel_joint" type="continuous">
      <origin xyz="-0.14366 ${reflect*0.3} 0.1925" rpy="0 0 0"/>
      <parent link="base_link"/>
      <child link="${prefix}_wheel"/>
      <axis xyz="0 1 0"/>
      <dynamics damping="0.7"/>
    </joint>
  </xacro:macro>

</robot>
